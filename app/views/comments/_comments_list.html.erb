<p><%=comment.body%></p>
<p>posted by <%= link_to comment.commenter.username, user_path(comment.commenter) %></p>
<%= form_for @upvote do %>
  <%= hidden_field_tag(:voter_id, current_user.id) %>
  <%= hidden_field_tag(:voteable_type, "Comment") %>
  <%= hidden_field_tag(:voteable_id, comment.id) %>
  <%= hidden_field_tag(:value,"1") %>
  <%= submit_tag("Up") %>
<% end %>

<%= form_for @downvote do %>
  <%= hidden_field_tag(:voter_id, current_user.id) %>
  <%= hidden_field_tag(:voteable_type, "Comment") %>
  <%= hidden_field_tag(:voteable_id, comment.id) %>
  <%= hidden_field_tag(:value,"-1") %>
  <%= submit_tag("Down") %>
<% end %>

<%= comment.vote_total %>

<ul>
  <%comment.comments.each do |sub_comment|%>
    <li><%=sub_comment.body%> posted by <%= link_to sub_comment.commenter.username, user_path(sub_comment.commenter) %></li>
  <%end%>
</ul>

<div id="new_comment">
  <% if current_user %>
  <%= link_to 'add reply', new_comment_comment_path(comment, commentable: {commentable_type: comment.class.to_s, commentable_id: comment.id}) %>
  <% end %>
</div>

<div id="answer-box">
  <% if current_user && @question.author == current_user %>
    <%= form_for comment do |f| %>
      <%= form_tag(comment_path, method: "patch") %>
      <%= f.label('mark as answer') %>
      <%= f.check_box(:is_answer) %> 
      <%= f.submit 'submit' %>
    <% end %>
  <% end %>
</div>

<hr>